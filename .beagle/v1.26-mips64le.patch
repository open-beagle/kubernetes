From 031dd7ae9222430ad5864cb87e1fe4f128cf23de Mon Sep 17 00:00:00 2001
From: shucheng <shucheng@bd-apaas.com>
Date: Tue, 14 Mar 2023 10:03:59 +0800
Subject: [PATCH] mips64le

---
 hack/lib/golang.sh | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/hack/lib/golang.sh b/hack/lib/golang.sh
index fb97ee76783..079e7d03c14 100755
--- a/hack/lib/golang.sh
+++ b/hack/lib/golang.sh
@@ -25,7 +25,7 @@ readonly KUBE_SUPPORTED_SERVER_PLATFORMS=(
   linux/amd64
   linux/arm
   linux/arm64
-  linux/s390x
+  linux/mips64le
   linux/ppc64le
 )
 
@@ -34,7 +34,7 @@ readonly KUBE_SUPPORTED_NODE_PLATFORMS=(
   linux/amd64
   linux/arm
   linux/arm64
-  linux/s390x
+  linux/mips64le
   linux/ppc64le
   windows/amd64
 )
@@ -46,7 +46,7 @@ readonly KUBE_SUPPORTED_CLIENT_PLATFORMS=(
   linux/386
   linux/arm
   linux/arm64
-  linux/s390x
+  linux/mips64le
   linux/ppc64le
   darwin/amd64
   darwin/arm64
@@ -61,7 +61,7 @@ readonly KUBE_SUPPORTED_TEST_PLATFORMS=(
   linux/amd64
   linux/arm
   linux/arm64
-  linux/s390x
+  linux/mips64le
   linux/ppc64le
   darwin/amd64
   darwin/arm64
@@ -211,8 +211,8 @@ kube::golang::setup_platforms() {
 
   elif [[ "${KUBE_FASTBUILD:-}" == "true" ]]; then
     host_arch=$(kube::util::host_arch)
-    if [[ "${host_arch}" != "amd64" && "${host_arch}" != "arm64" && "${host_arch}" != "ppc64le" && "${host_arch}" != "s390x" ]]; then
-      # on any platform other than amd64, arm64, ppc64le and s390x, we just default to amd64
+    if [[ "${host_arch}" != "amd64" && "${host_arch}" != "arm64" && "${host_arch}" != "ppc64le" && "${host_arch}" != "mips64le" ]]; then
+      # on any platform other than amd64, arm64, ppc64le and mips64le, we just default to amd64
       host_arch="amd64"
     fi
     KUBE_SERVER_PLATFORMS=("linux/${host_arch}")
@@ -433,9 +433,9 @@ kube::golang::set_platform_envs() {
         export CGO_ENABLED=1
         export CC=${KUBE_LINUX_PPC64LE_CC:-powerpc64le-linux-gnu-gcc}
         ;;
-      "linux/s390x")
+      "linux/mips64le")
         export CGO_ENABLED=1
-        export CC=${KUBE_LINUX_S390X_CC:-s390x-linux-gnu-gcc}
+        export CC=${KUBE_LINUX_S390X_CC:-mips64el-linux-gnuabi64-gcc}
         ;;
     esac
   fi
-- 
2.30.2

